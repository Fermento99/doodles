(()=>{"use strict";var t={278:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setUpActions=void 0,e.setUpActions=(t,e)=>{var i,s,o,l,n,r,a;null===(i=document.getElementById("random"))||void 0===i||i.addEventListener("click",(()=>{e.randomize()})),null===(s=document.getElementById("reset"))||void 0===s||s.addEventListener("click",(()=>{e.clear()}));const d=[document.getElementById("pause"),document.getElementById("play"),document.getElementById("fast-forward"),document.getElementById("fast-forward-x3")];d.forEach((e=>{null==e||e.addEventListener("click",(()=>{const i=e.getAttribute("simulation-speed");i&&t.setSpeed((t=>{switch(t){case"0":return 0;case"1":default:return 1;case"2":return 3;case"3":return 5}})(i)),d.forEach((t=>{null==t||t.classList.remove("active")})),e.classList.add("active")}))})),null===(o=document.getElementById("settings"))||void 0===o||o.addEventListener("click",(()=>{var t;null===(t=document.getElementById("settings-modal"))||void 0===t||t.classList.remove("hidden")})),null===(l=document.getElementById("close"))||void 0===l||l.addEventListener("click",(()=>{var t;null===(t=document.getElementById("settings-modal"))||void 0===t||t.classList.add("hidden")})),null===(n=document.getElementById("save"))||void 0===n||n.addEventListener("click",(()=>{const t=parseFloat(document.getElementById("random-chance").value),i=parseInt(document.getElementById("cell-width").value),s=parseInt(document.getElementById("cell-height").value),o=parseInt(document.getElementById("grid-width").value),l=parseInt(document.getElementById("grid-height").value),n=document.getElementById("full-width").checked,r=document.getElementById("full-height").checked,a=document.getElementById("monochromatic").checked;e.setOptions({randomChance:t,cellWidth:i,cellHeight:s,gridWidth:o,gridHeight:l,fullWidth:n,fullHeight:r,monochromatic:a})}));const h=document.getElementById("grid-width"),c=document.getElementById("grid-height");null===(r=document.getElementById("full-width"))||void 0===r||r.addEventListener("change",(t=>{t.target.checked?null==h||h.setAttribute("disabled","true"):null==h||h.removeAttribute("disabled")})),null===(a=document.getElementById("full-height"))||void 0===a||a.addEventListener("change",(t=>{t.target.checked?null==c||c.setAttribute("disabled","true"):null==c||c.removeAttribute("disabled")}))}},478:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DisplayHandler=void 0,e.DisplayHandler=class{constructor(t){this.monochromatic=!0,this._drawing=!1,this._display=t,this._ctx=t.getContext("2d"),this.cellSize={x:10,y:10},t.addEventListener("mousedown",(t=>{this.setDrawingMode(!0),this.handleDraw({x:t.offsetX,y:t.offsetY})})),t.addEventListener("mouseup",(()=>{this.setDrawingMode(!1)})),t.addEventListener("mouseleave",(()=>{this.setDrawingMode(!1)})),t.addEventListener("mouseenter",(t=>{1===t.buttons&&this.setDrawingMode(!0)})),t.addEventListener("mousemove",(t=>{this.handleDraw({x:t.offsetX,y:t.offsetY})}))}setSize({x:t,y:e}){const i=(!0===t?this.getFullWidth():t)*this.cellSize.x,s=(!0===e?this.getFullHeight():e)*this.cellSize.y;this._display.width=i,this._display.height=s}getFullWidth(){return Math.floor(document.body.clientWidth/this.cellSize.x)}getFullHeight(){return Math.floor(document.body.clientHeight/this.cellSize.y)}setDrawingMode(t){this._drawing=t,t||(this._lastDrawn=void 0)}handleDraw(t){var e;if(this._drawing&&this.drawHandler){const i={x:Math.floor(t.x/this.cellSize.x),y:Math.floor(t.y/this.cellSize.y)};i.x===(null===(e=this._lastDrawn)||void 0===e?void 0:e.x)&&i.y===this._lastDrawn.y||(this.drawHandler(i),this._lastDrawn=i)}}getDimentions(){return{x:this._display.width/this.cellSize.x,y:this._display.height/this.cellSize.y}}drawCell({position:{x:t,y:e},color:i}){const{x:s,y:o}=this.cellSize;this._ctx.fillStyle=this._convertColor(i),this._ctx.fillRect(s*t,o*e,s,o)}_convertColor({r:t,g:e,b:i}){return this.monochromatic?"rgba(0,0,0)":`rgb(${t.toString()}, ${e.toString()}, ${i.toString()})`}clear(){this._ctx.clearRect(0,0,this._display.width,this._display.height)}}},771:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Cell=e.Simulation=void 0,e.Simulation=class{constructor(t){this.randomChance=.2,this._dimentions={x:10,y:10},t.setSize(this._dimentions),t.drawHandler=t=>{this.handleDraw(t)},this._displayHandler=t,this._cells=[]}drawFrame(){this.simulationStep(),this.draw()}setOptions({randomChance:t,cellWidth:e,cellHeight:i,gridWidth:s,fullWidth:o,gridHeight:l,fullHeight:n,monochromatic:r}){this.randomChance=t,this._displayHandler.cellSize={x:e,y:i},this._displayHandler.setSize({x:o||s,y:n||l}),this._displayHandler.monochromatic=r,this._dimentions=this._displayHandler.getDimentions(),this.randomize()}draw(){this._displayHandler.clear(),this._cells.forEach((t=>{this._displayHandler.drawCell(t)}))}handleDraw(t){this.swapCell(t),this.draw()}swapCell(t){const e=this._cells.findIndex((e=>e.isAt(t)));if(-1===e){const e=new i(t);e.randomizeColor(),this._cells.push(e)}else this._cells.splice(e,1)}randomize(){this._cells=[];for(let t=0;t<this._dimentions.x;t++)for(let e=0;e<this._dimentions.y;e++)if(Math.random()<this.randomChance){const s=new i({x:t,y:e});s.randomizeColor(),this._cells.push(s)}this.draw()}clear(){this._cells=[],this.draw()}simulationStep(){const t=new Map;this._cells.forEach((e=>{const s=this.getCellId(e.position);this.getNeighbours(e.position).forEach((s=>{const o=this.getCellId(s),l=t.get(o);if(l)l.addNeighbour(e.color);else{const l=new i(s);l.addNeighbour(e.color),t.set(o,l)}}));const o=t.get(s);if(o)o.living=!0,o.color=e.color;else{const o=new i(e.position);o.living=!0,o.color=e.color,t.set(s,o)}})),this._cells=[],t.forEach((t=>{const e=t.getNeighbourCount();(3===e||2===e&&t.living)&&(t.calculateColor(),this._cells.push(t))}))}getCellId(t){return t.x*this._dimentions.x+t.y}getNeighbours(t){const{x:e,y:i}=t,s=[],o=e>0,l=e<this._dimentions.x-1,n=i>0,r=i<this._dimentions.y-1;return o&&(n&&s.push({x:e-1,y:i-1}),s.push({x:e-1,y:i}),r&&s.push({x:e-1,y:i+1})),l&&(n&&s.push({x:e+1,y:i-1}),s.push({x:e+1,y:i}),r&&s.push({x:e+1,y:i+1})),n&&s.push({x:e,y:i-1}),r&&s.push({x:e,y:i+1}),s}};class i{constructor(t){this.position=t,this.neighbourColors=[],this.color={r:0,g:0,b:0},this.living=!1}isAt({x:t,y:e}){return this.position.x===t&&this.position.y===e}addNeighbour(t){this.neighbourColors.push(t)}randomizeColor(){this.color={r:this._randomColorValue(),g:this._randomColorValue(),b:this._randomColorValue()}}getNeighbourCount(){return this.neighbourColors.length}calculateColor(){if(!this.living){this.neighbourColors.forEach((({r:t,g:e,b:i})=>{this.color.r+=t,this.color.g+=e,this.color.b+=i}));const t=this.neighbourColors.length;let e;for(e in this.color)this.color[e]=Math.round(this.color[e]/t)}}_randomColorValue(){return Math.floor(4*Math.pow(Math.random()-.5,2)*190)+63}}e.Cell=i},860:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationController=void 0,e.AnimationController=class{constructor(t){this._paused=!1,this._frameTime=500,this._drawable=t,this._start()}setSpeed(t){0===t?this._stop():(this._paused&&(this._paused=!1,this._start()),this._frameTime=1e3/Math.pow(2,t))}_stop(){this._paused=!0,this._animationFrame&&(cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0),this._timeout&&(clearTimeout(this._timeout),this._timeout=void 0)}_start(){this._animationFrame||this._timeout||(this._animationFrame=requestAnimationFrame((t=>{this._loop(t)})))}_loop(t){this._drawable.drawFrame();const e=this._frameTime-performance.now()+t;e>0?this._timeout=setTimeout((()=>{this._animationFrame=requestAnimationFrame((t=>{this._loop(t)}))}),e):this._animationFrame=requestAnimationFrame((t=>{this._loop(t)}))}}}},e={};function i(s){var o=e[s];if(void 0!==o)return o.exports;var l=e[s]={exports:{}};return t[s](l,l.exports,i),l.exports}(()=>{const t=i(860),e=i(478),s=i(278),o=i(771);console.log("Hello Life!");const l=new e.DisplayHandler(document.getElementById("display")),n=new o.Simulation(l),r=new t.AnimationController(n);(0,s.setUpActions)(r,n),n.randomize()})()})();